<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      #main,
      html,
      body {
        width: 100%;
      }
      #main {
        height: 400px;
      }
    </style>
  </head>
  <body>
    <div id="main"></div>
    <button onclick="dispose()">销毁</button>
    <button onclick="create()">新建</button>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.3.2/dist/echarts.min.js"></script>
    <script>
      var myChart;
      const dispose = () => {
        myChart && myChart.dispose();
      };
      const create = () => {
        myChart = echarts.init(document.getElementById("main"), null);
        let option = {
          dataset: {
            source: [
              [
                "product",
                "1月",
                "2月",
                "3月",
                "4月",
                "5月",
                "6月",
                "7月",
                "8月",
                "9月",
                "10月",
                "11月",
                "12月",
              ],
              [
                "降水量",
                6,
                32,
                70,
                86,
                68.7,
                100.7,
                125.6,
                112.2,
                78.7,
                48.8,
                36.0,
                19.3,
              ],
              [
                "温度",
                6.0,
                10.2,
                10.3,
                11.5,
                10.3,
                13.2,
                14.3,
                16.4,
                18.0,
                16.5,
                12.0,
                5.2,
              ],
            ],
          },
          tooltip: {
            trigger: "axis",
            axisPointer: { type: "cross" },
          },
          legend: {},
          xAxis: [
            {
              type: "category",
              axisTick: {
                alignWithLabel: true,
              },
            },
          ],
          yAxis: [
            {
              type: "value",
              name: "降水量",
              min: 0,
              max: 250,
              position: "right",
              axisLabel: {
                formatter: "{value} ml",
              },
            },
            {
              type: "value",
              name: "温度",
              min: 0,
              max: 25,
              position: "left",
              axisLabel: {
                // 格数化坐标轴文字
                formatter: "{value} °C",
              },
            },
          ],
          series: [
            {
              type: "bar",
              yAxisIndex: 0,
              // 自动使用 index 1 的 row
              seriesLayoutBy: 'row',
            },
            {
              type: "line",
              smooth: true,
              yAxisIndex: 1,
               // 自动使用 index 2 的 row
              seriesLayoutBy: 'row',
            },
          ],
        };
        myChart.setOption(option);
      };
      document.addEventListener("DOMContentLoaded", create);
      /* 
      小贴士：在容器节点被销毁时，总是应调用 echartsInstance.dispose 以销毁实例释放资源，避免内存泄漏。
      */
    </script>
  </body>
</html>
